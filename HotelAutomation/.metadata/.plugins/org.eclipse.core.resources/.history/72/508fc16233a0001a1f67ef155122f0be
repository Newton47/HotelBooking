package stepDefinitions;

import java.util.concurrent.TimeUnit;

import org.junit.Assert;
import org.openqa.selenium.support.ui.ExpectedConditions;
import org.openqa.selenium.support.ui.WebDriverWait;

import CaseStudy.HotelBooking.Base;
import cucumber.api.java.en.Given;
import cucumber.api.java.en.Then;
import cucumber.api.java.en.When;
import pageObjects.loginPage;

public class loginStepDef extends Base{

	WebDriverWait wait = new WebDriverWait(driver,5);
	loginPage login;
	
	
	@Given("^User launches the browser$")
	public void user_launches_the_browser() throws Throwable {
		driver = Base.getDriver();
			
	}

	@When("^User loads the login html page in the broswer$")
	public void user_loads_the_login_html_page_in_the_broswer() throws Throwable {
	    // Write code here that turns the phrase above into concrete actions
		//System.out.println("this is also a test");
	   
	}

	@Then("^User validates the title of the home page$")
	public void user_validates_the_title_of_the_home_page() throws Throwable {
		login = new loginPage(driver);
		String loginPageTitle = login.getLoginTitle();
		Assert.assertTrue(loginPageTitle.contains("Hotel Booking Application"));
		System.out.println("Title is verified");
		//driver.manage().timeouts().implicitlyWait(5, TimeUnit.SECONDS);
		//Thread.sleep(3000);
	}

	@When("^User clicks on the Login button without entering username$")
	public void user_clicks_on_the_Login_button_without_entering_username() throws Throwable {
	    login.clickLogin();
	    System.out.println("Login button clicked");
	    
	    
	}

	@Then("^User verifies username error message is thrown$")
	public void user_verifies_username_error_message_is_thrown() throws Throwable {
		
		String userErr = login.getUserErr();
		wait.until(ExpectedConditions.alertIsPresent());
	    Assert.assertTrue(userErr.contains("* Please enter userName."));
	    
	}

	@Then("^User enters the username$")
	public void user_enters_the_username() throws Throwable {
		
	    login.setUserName(Base.credentials("username"));
	 
	}

	@Then("^clicks on the Login button$")
	public void clicks_on_the_Login_button() throws Throwable {
	    login.clickLogin();
	    System.out.println("Login button clicked");
	    driver.manage().timeouts().implicitlyWait(3,TimeUnit.SECONDS);
	   
	}

	@Then("^User verifies password error message is thrown$")
	public void user_verifies_password_error_message_is_thrown() throws Throwable {
	    String passErr = login.getPassErr();
	    Assert.assertTrue(passErr.contains("* Please enter password."));
	    driver.manage().timeouts().implicitlyWait(3,TimeUnit.SECONDS);
	   
	}

	@Then("^User enter the password$")
	public void user_enter_the_password() throws Throwable {
		login.setPassword(Base.credentials("password"));
		driver.manage().timeouts().implicitlyWait(3,TimeUnit.SECONDS);
	}

	@Then("^the user is successfully logged into HotelBookingForm page$")
	public void the_user_is_successfully_logged_into_HotelBookingForm_page() throws Throwable {
		driver.manage().timeouts().implicitlyWait(3,TimeUnit.SECONDS); 
	}

	}

